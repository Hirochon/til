## お名前.comで取得したドメインをALB(ELB)を使って常時SSL化 (2020/2/21)

### リポジトリ: [Shappar](https://github.com/Hirochon/Shappar)

### 本日やった事リスト
1. 朝起きてスケジュールの確認を行った。(コーディングテスト、面談、Shappar...その他もろもろ)
2. 予定に苦しみつつ、ある会社様のコーディングテストを受ける→コーディングテストを受けるたびに自分の未熟さが露見する。
3. やはり純粋なアルゴリズムを用いたプログラミング力はまだまだ乗り越えなければいけないといった感じです。
4. 『それを補えるだけの新たな技術へのインプット/アウトプット力で巻き返すぞ！』と意気込みつつしっかりC言語の復習をしました。笑
5. やっとタイトルの伏線を回収します。Shapparデプロイに向けて、ドメインの取得、常時SSL化はしなければいけないので、https目指して頑張る目標を立てる。
6. まずは元からAWSにて所持していたドメインを使って常時SSL化(https化)しました。この前はQiita見ながらやっていたのですが、うまく行かなかったのが記憶に新しいです。
7. 書籍をみながらやると、驚くことにすぐに実装できてしましました(笑)。この前何に苦戦したのだろう...？ってなるレベル。笑
8. 本番のドメインで行ってみる。お名前.comで取得しているので、ネームサーバーが違ったり、そもそも『DNSサーバーてなんやねん！！』とか思い出したので、しっかり書籍で勉強。
9. ホスト名を`hinatazaka`とかにしてRoute53で遊びつつ、Route53で使っているNSをお名前.comに登録して、AWSの支配下におきました。(ここは色々ググった。)
    - 特にこの記事([お名前.comからRoute53へネームサーバーを変更する時に迷子になる人へ](https://qiita.com/ysKey2/items/0545e13ec05def42ad55))はとても参考になった。ネームサーバーのところは時間がかかるので、不安になったなぁ。
10. なんとかRoute53支配下に置けたので、あとはACMを使って証明書発行して、CNAMEの情報が登録されるのを気長に待つ。→成功。
11. VPC→サブネット→ルートテーブル→ゲートウェイのいつもの流れしつつ、EC2でもインスタンス作成→ElasticIPで固定→sshログイン→apacheでhtmlを読み込めるようにする→Image保存(AMI)→インスタンスを起動→もいっかいElasticIPで固定→EC2インスタンスを2つ使ってELB(ALB)でアクセス分散→Route53でELBのAレコード登録して常時SSL化(https化)に成功する！！
12. 本当に分散されているのかを実験。`var/www/html/`下にindex.htmlを2つのEC2インスタンスに別々の内容のHTMLを書いて、更新しまくる。
13. 同じURLなのに表示内容が代わるので、分散成功ですな！！
14. TIL書いてます！もうすぐ寝ます！