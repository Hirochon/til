## はじめてのCircleCI (2020/3/8)

### 何をしてたか
1. Swaggarで友達とRESTAPIのリクエスト,レスポンス内容を共有するためにStoplightに挑戦！
2. 使い方わからなすぎて、友達のほうが慣れているため引き継ぎ。笑
3. 上の①②やっているうちに、バックエンドの`selected_num`でバグが発見できたので、修正。
    - 以下の条件に従って`selected_num`を定義しました。
        1. 過去にある投稿に投票したユーザーは、投稿一覧表示のGET時にある投稿の`selected_num`に`過去に選択した選択肢`を入れてレスポンス
        2. 過去にある投稿に対して投票していないユーザーは、投稿一覧表示のGET時にある投稿の`selected_num`に`-1`を代入
        3. ある投稿を投稿したユーザは、投稿一覧表示のGET時にある投稿の`selected_num`に`-1`を代入
        4. 投稿更新時も上記①②③に従って、selected_numを返す。
        5. 投票時も別個にしてレスポンス
    - ちなみに重要な部分を占めるコードは下記
    
    ```python:views.py
    flag = Poll.objects.filter(user_id=pk,option_id=data['id'])
    if len(flag) > 0:
        datas['selected_num'] = Option.objects.get(id=flag[0].option_id).select_num
    ```

    - 投票モデルで`ユーザのユニークID`と`選択肢ID`にてフィルタをかけることにより目的のクエリセットを取り出すことができる。
    - またクエリセットは型が特殊なので、len関数による長さで中身の有無を確かめている
    - OptionモデルでPollと選択したID共通するIDのクエリセットを取得して、それに対応する`select_num`を取り出した。

---

4. CircleCI!!!!!!!!!!!!
    - やっとの思いでたどり着きました。まあでも当初予定していた`まだ学習していない技術`もあと`Terraform`のみ。
    - そんなことより**CircleCI**やっていくでな！！
5. とりまQiitaで入門記事見てたけど、知識を一方的に押し付けられてる感(※個人の感想です)がすごい...。
6. まだそんなレベルじゃないと思い、公式サイトでハンズオン形式のチュートリアルをやっていく！！
    - ちなみにリポジトリはコチラ → [CircleCI-43](https://github.com/Hirochon/circleci-43)
7. チュートリアルでかんじたこと〜〜〜〜
    - へー。先に定義して、後で実行する順番決めるんだ。`requires`で順番を決めていくんだね！(**workflows**)